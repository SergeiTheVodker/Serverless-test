{
    "Transform": "AWS::Serverless-2016-10-31",
    "Resources": {
        "FunctionGet": {
            "Type": "AWS::Serverless::Function",
            "Properties": {
                "Description": {
                    "Fn::Sub": [
                        "Stack ${AWS::StackName} Function ${ResourceName}",
                        {
                            "ResourceName": "FunctionGet"
                        }
                    ]
                },
                "CodeUri": "src/FunctionGet",
                "Handler": "index.lambda_handler",
                "Runtime": "python3.9",
                "MemorySize": 3008,
                "Timeout": 30,
                "Tracing": "Active",
                "Events": {
                    "TestAPIGatewayGET": {
                        "Type": "Api",
                        "Properties": {
                            "Path": "/",
                            "Method": "GET",
                            "RestApiId": {
                                "Ref": "TestAPIGateway"
                            }
                        }
                    }
                }
            }
        },
        "FunctionGetLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "DeletionPolicy": "Retain",
            "Properties": {
                "LogGroupName": {
                    "Fn::Sub": "/aws/lambda/${FunctionGet}"
                }
            }
        },
        "FunctionPut": {
            "Type": "AWS::Serverless::Function",
            "Properties": {
                "Description": {
                    "Fn::Sub": [
                        "Stack ${AWS::StackName} Function ${ResourceName}",
                        {
                            "ResourceName": "FunctionPut"
                        }
                    ]
                },
                "CodeUri": "src/FunctionPut",
                "Handler": "index.lambda_handler",
                "Runtime": "python3.9",
                "MemorySize": 3008,
                "Timeout": 2,
                "Tracing": "Active",
                "Events": {
                    "TestAPIGatewayPUT": {
                        "Type": "Api",
                        "Properties": {
                            "Path": "/",
                            "Method": "PUT",
                            "RestApiId": {
                                "Ref": "TestAPIGateway"
                            }
                        }
                    }
                }
            }
        },
        "FunctionPutLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "DeletionPolicy": "Retain",
            "Properties": {
                "LogGroupName": {
                    "Fn::Sub": "/aws/lambda/${FunctionPut}"
                }
            }
        },
        "FunctionPost": {
            "Type": "AWS::Serverless::Function",
            "Properties": {
                "Description": {
                    "Fn::Sub": [
                        "Stack ${AWS::StackName} Function ${ResourceName}",
                        {
                            "ResourceName": "FunctionPost"
                        }
                    ]
                },
                "CodeUri": "src/FunctionPost",
                "Handler": "index.lambda_handler",
                "Runtime": "python3.9",
                "MemorySize": 3008,
                "Timeout": 2,
                "Tracing": "Active",
                "Events": {
                    "TestAPIGatewayPOST": {
                        "Type": "Api",
                        "Properties": {
                            "Path": "/",
                            "Method": "POST",
                            "RestApiId": {
                                "Ref": "TestAPIGateway"
                            }
                        }
                    }
                }
            }
        },
        "FunctionPostLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "DeletionPolicy": "Retain",
            "Properties": {
                "LogGroupName": {
                    "Fn::Sub": "/aws/lambda/${FunctionPost}"
                }
            }
        },
        "TestAPIGateway": {
            "Type": "AWS::Serverless::Api",
            "Properties": {
                "Name": {
                    "Fn::Sub": [
                        "${ResourceName} From Stack ${AWS::StackName}",
                        {
                            "ResourceName": "TestAPIGateway"
                        }
                    ]
                },
                "StageName": "Prod",
                "DefinitionBody": {
                    "openapi": "3.0",
                    "info": {},
                    "paths": {
                        "/": {
                            "get": {
                                "x-amazon-apigateway-integration": {
                                    "httpMethod": "POST",
                                    "type": "aws_proxy",
                                    "uri": {
                                        "Fn::Sub": "arn:${AWS::Partition}:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${FunctionGet.Arn}/invocations"
                                    }
                                },
                                "responses": {}
                            },
                            "put": {
                                "x-amazon-apigateway-integration": {
                                    "httpMethod": "POST",
                                    "type": "aws_proxy",
                                    "uri": {
                                        "Fn::Sub": "arn:${AWS::Partition}:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${FunctionPut.Arn}/invocations"
                                    }
                                },
                                "responses": {}
                            },
                            "post": {
                                "x-amazon-apigateway-integration": {
                                    "httpMethod": "POST",
                                    "type": "aws_proxy",
                                    "uri": {
                                        "Fn::Sub": "arn:${AWS::Partition}:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${FunctionPost.Arn}/invocations"
                                    }
                                },
                                "responses": {}
                            }
                        }
                    }
                },
                "EndpointConfiguration": "REGIONAL",
                "TracingEnabled": true,
                "Cors": {
                    "MaxAge": 5
                }
            }
        }
    }
}